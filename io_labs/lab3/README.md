# Лабораторная работа 3

**Название:** "Разработка драйверов сетевых устройств"

**Цель работы:** "получить знания и навыки разработки драйверов сетевых
интерфейсов для операционной системы Linux."

## Описание функциональности драйвера

- UВЗ пакеты длиной больше 100 байт. Вывести длину.

- Состояние разбора пакетов необходимо выводить в кольцевой буфер ядра.

## Инструкция по сборке

Для сборки использовать

`make`

Для загрузки модуля в ядро:

`make load`

Для выгрузки модуля:

`make unload`

Для очистки:

`make clean`

## Инструкция пользователя

```bash
make

make load

echo -n "text" | nc -4u -w1 10.0.2.15 7777

dmesg
```

В результате можно проследить длину передаваемых пакетов (если они больше 100 байт)

## Примеры использования

```bash
[ 2092.310554] lab3: create link vni0
[ 2092.310559] lab3: registered rx handler for eth0
[ 2092.419604] IPv6: ADDRCONF(NETDEV_UP): vni0: link is not ready
[ 2092.419977] vni0: device opened
[ 2092.630920] Len = 300
[ 2092.630933] Captured UDP datagram, saddr: 0.0.0.0
[ 2092.630941] daddr: 255.255.255.255
[ 2092.800825] Len = 357
[ 2092.800837] Captured UDP datagram, saddr: 0.0.0.0
[ 2092.800844] daddr: 255.255.255.255
[ 2092.885145] Len = 300
[ 2092.885172] Captured UDP datagram, saddr: 192.168.1.1
[ 2092.885183] daddr: 192.168.1.64
[ 2093.109568] Len = 204
[ 2093.109581] Captured UDP datagram, saddr: 192.168.1.64
[ 2093.109587] daddr: 224.0.0.251
[ 2093.137677] Len = 300
[ 2093.137690] Captured UDP datagram, saddr: 192.168.1.1
[ 2093.137697] daddr: 192.168.1.64
[ 2093.359770] Len = 204
[ 2093.359783] Captured UDP datagram, saddr: 192.168.1.64
[ 2093.359790] daddr: 224.0.0.251
[ 2093.610531] Len = 204
[ 2093.610543] Captured UDP datagram, saddr: 192.168.1.64
[ 2093.610550] daddr: 224.0.0.251
[ 2093.811046] Len = 186
[ 2093.811058] Captured UDP datagram, saddr: 192.168.1.64
[ 2093.811064] daddr: 224.0.0.251
[ 2094.953034] Len = 186
[ 2094.953047] Captured UDP datagram, saddr: 192.168.1.64
[ 2094.953054] daddr: 224.0.0.251
[ 2097.096037] Len = 186
[ 2097.096049] Captured UDP datagram, saddr: 192.168.1.64
[ 2097.096056] daddr: 224.0.0.251
```
